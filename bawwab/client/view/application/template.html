<aside class="appoverlay">
   <header>
		<nav class="pure-g">
		   <div class="pure-u-1-5 back">
				   <router-link :to="{name: 'workspaces'}">{{ t('projects') }}</router-link>
		   </div>
		   <div class="pure-u-3-5 title">
				<ul>
					<li v-if="program && program.error !== null"><action-button :f="reset" icon="redo">{{ t('reset') }}</action-button></li>
					<li v-if="program && program.state != ConductorState.exited"><action-button :f="terminate" icon="stop">{{ t('stop') }}</action-button></li>
					<li v-if="workspace"><router-link :to="{name: 'workspace', params: {wsid: workspace.metadata._id}}"><application-icon :workspace="workspace" :application="application"></application-icon> {{ workspace.metadata.name }}</router-link></li>
					<li><dropdown class="history">
						<template v-slot:button>
							<action-button :f="createManualVersion" icon="history" importance="low">{{ t('createVersion') }}</action-button>
							<i class="fas fa-caret-down"></i>
						</template>
						<template v-slot:default>
							<workspace-version :wsid="wsid"></workspace-version>
						</template>
					</dropdown></li>
				</ul>
		   </div>
		   <div class="pure-u-1-5 logo">
				   <router-link :to="{name: 'index'}"><img src="https://www.lifp.de/assets/images/psychnotebook.svg" style="height: 1.5em; filter: invert(100%) opacity(50%);"></router-link>
		   </div>
		</nav>
		<message v-if="needRestart" kind="warning">{{ t('needrestart') }}</message>
	</header>
	<p v-if="!workspace">{{ t('nonexistentws') }}</p>
	<p v-else-if="!application">{{ t('nonexistent') }}</p>
	<iframe v-else-if="url" frameborder="0" name="appframe" :src="url"></iframe>
	<div v-else-if="program" class="loading">
		<details>
			<summary>
			<span v-if="program.process?.exitStatus == 4">{{ t('busy') }}</span>
			<span v-else-if="program.error !== null">{{ t('failed', {reason: program.error}) }}.</span>
			<span v-else-if="program.state == ConductorState.starting">{{ t('starting') }}<br><spinner :big="true"></spinner></span>
			<span v-else-if="program.state == ConductorState.exited">{{ t('exited') }}</span>
			</summary>
			<pre class="log" v-if="program && program.output">{{ program.output }}</pre>
		</details>
	</div>
</aside>
